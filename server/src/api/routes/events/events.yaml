paths:
  /events:
    get:
      tags:
        - events
      summary: List events
      description: Returns all events in chronological order.
      operationId: getEvents
      responses:
        '200':
          description: Events fetched
          content:
            application/json:
              schema:
                type: object
                properties:
                  events:
                    type: array
                    items:
                      $ref: '../../docs/openapi.yaml#/components/schemas/Event'
    post:
      tags:
        - events
      summary: Create event
      description: Creates a new event (Admins only).
      operationId: addEvent
      requestBody:
        description: Event data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                type:
                  type: string
                  enum: [REHEARSAL, CONCERT, GIG, PARTY, MEETING, OTHER]
                description:
                  type: string
                dateStart:
                  type: string
                  format: date-time
                dateEnd:
                  type: string
                  format: date-time
                place:
                  type: string
                requiresAttendance:
                  type: boolean
                requiresRegistration:
                  type: boolean
              required:
                - name
                - type
                - dateStart
                - place
      responses:
        '201':
          description: Event created
          content:
            application/json:
              schema:
                type: object
                properties:
                  event:
                    $ref: '../../docs/openapi.yaml#/components/schemas/Event'

  /events/{eventId}:
    parameters:
      - name: eventId
        in: path
        description: ID of the event
        required: true
        schema:
          type: integer
          format: int64
    put:
      tags:
        - events
      summary: Update event
      description: Updates an existing event by ID (Admins only).
      operationId: updateEvent
      requestBody:
        description: Event fields to update
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                type:
                  type: string
                  enum: [REHEARSAL, CONCERT, GIG, PARTY, MEETING, OTHER]
                description:
                  type: string
                dateStart:
                  type: string
                  format: date-time
                dateEnd:
                  type: string
                  format: date-time
                place:
                  type: string
                requiresAttendance:
                  type: boolean
                requiresRegistration:
                  type: boolean
      responses:
        '200':
          description: Event updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  event:
                    $ref: '../../docs/openapi.yaml#/components/schemas/Event'
    delete:
      tags:
        - events
      summary: Delete event
      description: Deletes an event by ID (Admins only).
      operationId: deleteEvent
      responses:
        '204':
          description: Event deleted

  /events/{eventId}/registration:
    parameters:
      - name: eventId
        in: path
        description: ID of the event
        required: true
        schema:
          type: integer
          format: int64
    post:
      tags:
        - events
      summary: Register user for event
      description: Marks a user's registration for the specified event.
      operationId: markRegistration
      requestBody:
        description: Registration details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  type: integer
                  format: int64
              required:
                - userId
      responses:
        '201':
          description: Registration created
          content:
            application/json:
              schema:
                type: object
                properties:
                  registration:
                    $ref: '../../docs/openapi.yaml#/components/schemas/Registration'

    delete:
      tags:
        - events
      summary: Unregister user from event
      description: Removes a user's registration for the specified event.
      operationId: unmarkRegistration
      requestBody:
        description: Registration details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  type: integer
                  format: int64
              required:
                - userId
      responses:
        '204':
          description: Registration removed

  /events/{eventId}/attendance:
    parameters:
      - name: eventId
        in: path
        description: ID of the event
        required: true
        schema:
          type: integer
          format: int64
    put:
      tags:
        - events
      summary: Update attendance
      description: Marks a user's attendance for the specified event.
      operationId: markAttendance
      requestBody:
        description: Attendance details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  type: integer
                  format: int64
                status:
                  type: string
                  enum: [PRESENT, ABSENT]
              required:
                - userId
                - status
      responses:
        '200':
          description: Attendance updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  attendance:
                    $ref: '../../docs/openapi.yaml#/components/schemas/Attendance'
